<!-- app/views/audit_logs/index.html.erb -->
<%= render 'layouts/navbar' %>
  <div class="w-full px-5">
    <% if notice.present? %>
      <p class="py-2 px-3 bg-green-50 mb-5 text-green-500 font-medium rounded-lg inline-block" id="notice"><%= notice %></p>
    <% end %>

    <div class="flex justify-between items-center mb-6">
      <h1 class="font-bold text-4xl">Audit Logs</h1>
      <div class="flex space-x-2">
        <select id="audit-log-selector" class="rounded-lg py-3 px-5 bg-gray-100 font-medium hover:bg-gray-200">
          <option value="">Select Audit Log</option>
          <option value="users">User Audit Logs</option>
          <option value="students">Student Audit Logs</option>
          <option value="options">Option Audit Logs</option>
          <option value="notes">Note Audit Logs</option>
          <option value="student_options">Student Option Audit Logs</option>
        </select>
      </div>
    </div>

    <div id="audit-log-container" class="mt-4 overflow-x-auto">
      <!-- Partials will be loaded here -->
    </div>
  </div>

  <script>
    document.addEventListener("DOMContentLoaded", function() {
      const selector = document.getElementById("audit-log-selector");
      const container = document.getElementById("audit-log-container");

      selector.addEventListener("change", function() {
        const value = selector.value;
        if (value) {
          fetch(`/audit_logs/${value}`)
            .then(response => response.text())
            .then(html => {
              container.innerHTML = html;
            });
        } else {
          container.innerHTML = "";
        }
      });
    });
  </script>
