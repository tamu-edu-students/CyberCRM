<!-- app/views/layouts/_navbar.html.erb -->
<style> <!--  from w3schools -->
.dropdown {
  position: relative;
  display: inline-block;
}

.dropdown-content {
  display: none;
  position: absolute;
  background-color: #f9f9f9;
  color: #000000;
  min-width: 160px;
  box-shadow: 0px 8px 16px 0px rgba(0,0,0,0.2);
  padding: 12px 16px;
  z-index: 1;
  right: 0;
}

.dropdown:hover .dropdown-content {
  display: block;
}
</style>
<header class="bg-maroon-800 text-white py-4 px-8 flex justify-around items-center fixed top-0 left-0 w-full z-10">
  <div>
    <%= link_to pages_home_path, data: { turbo: false } do %>
      <%= image_tag('logo.png', alt: 'Cyber CRM', class: 'h-10 mr-4') %>
    <% end %>
  </div>
  <div class="flex-1 flex justify-center">
    
    <% if Rails.env.test? %>
      <%= link_to pages_form_path, id: "search-link", data: { turbo_frame: "modal" }, class: 'text-white' do %>
          <i class="fas fa-search"></i>
        <% end %>
    <% end %>
    
    <nav class="flex space-x-6">
      <% if session[:user_id] %>
        <%= link_to pages_form_path, id: "search-link", data: { turbo_frame: "modal" }, class: 'text-white hover:opacity-80 text-2xl' do %>
          <i class="fas fa-search"></i>
        <% end %>
        <%= link_to 'Home', pages_home_path, data: { turbo: false }, class: 'text-white hover:opacity-80 hover:text-yellow-500 text-2xl' %> 
        <%= link_to 'Students', students_path, data: { turbo: false }, class: 'text-white hover:opacity-80 hover:text-yellow-500 text-2xl' %>
        
      <% else %>
        <%= button_to 'Login', '/auth/google_oauth2', data: { turbo: "false" }, class: 'text-white hover:opacity-80 hover:text-yellow-500 text-2xl' %>
      <% end %>
    </nav>
  </div>
  <% if current_user != nil %>
    <div class="dropdown">
      <%= current_user.name %>
      <p class=dropbtn><%= image_tag(current_user.image, alt: 'User image', class: 'h-10 mr-4') %></p>
      <div class="dropdown-content" style="float:right;">
        <%= current_user.email %>
        <% if current_user.role == 'super_user' %>
          <p>Logged in as a Super User</p>
        <% end %>
        <% if current_user.role == 'program_director' %>
          <p>Logged in as a Program Director</p>
        <% end %>
        <% if current_user.role == 'student_worker' %>
          <p>Logged in as a Student Worker</p>
        <% end %>
        <%= link_to 'Sign out', logout_path, data: { turbo: false }, class: '\hover:opacity-80 hover:text-red-500 text-2xl' %>
      </div>
    </div>
  <% end %>
  
</header>
